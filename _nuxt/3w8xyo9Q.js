import{_ as F}from"./Dl2BQ0r4.js";import{u as N,_ as B,c as H}from"./DWI4Qp-S.js";import{_ as A}from"./WoSz7ZcH.js";import{c as Y,u as D}from"./WzmRYzg9.js";import{e as I,o as a,c as l,a as o,t as n,b as r,j as i,l as g,s as L,n as z,f as E,r as G,g as f,F as k,k as O,v as b,m as U,w as j,d as q}from"./DD7v__ku.js";import{_ as J}from"./DlAUqK2U.js";import{f as K}from"./Dxpp2h6a.js";import{a as Q,c as W}from"./DHLrws4d.js";const X={key:0,class:"modal-player"},Z={class:"video-player"},x=["src","videoId"],ee=I({__name:"VideoPlayer",props:{videoId:{},title:{},close:{type:Function}},setup(t){return(s,c)=>s.videoId?(a(),l("div",X,[o("div",Z,[o("h3",null,n(s.title),1),o("iframe",{src:`https://www.youtube.com/embed/${s.videoId}?controls=0&autoplay=1&mute=1`,videoId:s.videoId},null,8,x),o("button",{onClick:c[0]||(c[0]=(...v)=>s.close&&s.close(...v))},[r(i(Y))])])])):g("",!0)}}),oe=J(ee,[["__scopeId","data-v-e196013f"]]),te={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"};function se(t,s){return a(),l("svg",te,s[0]||(s[0]=[L('<defs><clipPath id="a"><rect width="23" height="23" fill-opacity="0" rx="-.5" transform="translate(.5 .5)"></rect></clipPath></defs><rect width="23" height="23" fill="none" rx="-.5" transform="translate(.5 .5)"></rect><g clip-path="url(#a)"><path d="M12 4c2.74 0 5.17 1.38 6.61 3.5H16v2h6v-6h-2v2.49A10.01 10.01 0 0 0 12 2C6.47 2 2 6.47 2 12h2c0-4.42 3.58-8 8-8m8 8c0 4.41-3.59 8-8 8-2.75 0-5.18-1.39-6.62-3.5H8v-2H2v6h2V18a9.99 9.99 0 0 0 8 4c5.52 0 10-4.48 10-10z"></path></g>',3)]))}const ie={render:se},ae=z("movieRandom",{state:()=>({movieTitle:"",moviePlot:"",movieRating:0,movieYear:0,movieGenre:[],movieRuntime:0,movieBackdrop:"",movieId:0,movieTrailerYouTubeId:""}),actions:{async fetchMovieRandom(){try{const t=await Q.get(W);this.movieTitle=t.data.title,this.moviePlot=t.data.plot,this.movieRating=t.data.tmdbRating,this.movieYear=t.data.releaseYear,this.movieGenre=t.data.genres,this.movieRuntime=t.data.runtime,this.movieBackdrop=t.data.backdropUrl,this.movieId=t.data.id,this.movieTrailerYouTubeId=t.data.trailerYouTubeId}catch(t){console.error("Ошибка при получении данных о фильме:",t)}},refreshMovieData(){return this.fetchMovieRandom()}}}),ne={class:"container"},re={class:"movie"},le={class:"movie_backdrop"},ce={class:"movie_content"},de={class:"movie_content-top"},me={class:"movie_content-center"},ve={class:"movie_line"},ke=I({__name:"Movie",props:{movieProps:{}},setup(t){const s=ae(),c=N(),v=E(),u=D(),p=G(""),P=t,d=f(()=>v.path==="/"),_=f(()=>u.user),y=f(()=>{var e;return(e=_.value)==null?void 0:e.favorites.includes(P.movieProps.id.toString())}),M=async e=>{console.log(_.value),_.value?y.value?await u.removeFavorites(e):await u.addFavorites(e):c.open()},w=async()=>{await s.refreshMovieData()},S=()=>{p.value=P.movieProps.youTubeId},C=()=>{p.value=""};return(e,m)=>{const R=F,T=B,V=A,$=oe;return a(),l(k,null,[o("div",ne,[o("section",re,[o("div",le,[r(R,{src:e.movieProps.backdrop,alt:"Backdrop"},null,8,["src"])]),o("div",ce,[o("div",de,[r(T,{class:"movie_rating",rating:e.movieProps.rating,customClass:"star_svg"},null,8,["rating"]),o("span",null,n(e.movieProps.year),1),(a(!0),l(k,null,O(e.movieProps.genres,h=>(a(),l("span",{key:h},n(h),1))),128)),o("span",null,n(("convertMinutesToHoursAndMinutes"in e?e.convertMinutesToHoursAndMinutes:i(H))(e.movieProps.runtime)),1)]),o("div",me,[o("h2",null,n(e.movieProps.title),1),o("p",null,n(e.movieProps.plot),1)]),o("div",{class:b(["movie_content-bottom",{"page-movie":!i(d),"page-cover":i(d)}])},[o("button",{onClick:S,class:"movie_trailer"}," Треилер "),o("div",ve,[i(d)?(a(),U(V,{key:0,to:`/movies/${e.movieProps.id}`},{default:j(()=>m[1]||(m[1]=[q(" О фильме")])),_:1},8,["to"])):g("",!0),o("button",{class:"favorite_btn",onClick:m[0]||(m[0]=h=>M(e.movieProps.id.toString()))},[r(i(K),{class:b(["favorite",{favoriteFill:i(y)}])},null,8,["class"])]),i(d)?(a(),l("button",{key:1,class:"update_btn",onClick:w},[r(i(ie),{class:"update_svg"})])):g("",!0)])],2)])])]),r($,{videoId:i(p),title:e.movieProps.title,close:C},null,8,["videoId","title"])],64)}}});export{ke as _,ae as u};
