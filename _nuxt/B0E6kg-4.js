import{_ as B}from"./DHbUopgg.js";import{m as F,_ as N,c as P}from"./DJuF6R5W.js";import{_ as A}from"./BcHPnT_R.js";import{c as H,u as Y}from"./CTzs3MLd.js";import{e as I,o as i,c as l,a as t,t as n,b as r,j as a,l as h,A as D,n as L,f as z,r as E,g as _,F as b,k as G,B as k,m as O,w as U,d as j}from"./CJzKi6tS.js";import{_ as q}from"./DlAUqK2U.js";import{f as J}from"./D4hpL5Li.js";import{a as K,c as Q}from"./DHLrws4d.js";const W={key:0,class:"modal-player"},X={class:"video-player"},Z=["src","videoId"],x=I({__name:"VideoPlayer",props:{videoId:{},title:{},close:{type:Function}},setup(o){return(s,d)=>s.videoId?(i(),l("div",W,[t("div",X,[t("h3",null,n(s.title),1),t("iframe",{src:`https://www.youtube.com/embed/${s.videoId}?controls=0&autoplay=1&mute=1`,videoId:s.videoId},null,8,Z),t("button",{onClick:d[0]||(d[0]=(...c)=>s.close&&s.close(...c))},[r(a(H))])])])):h("",!0)}}),ee=q(x,[["__scopeId","data-v-e196013f"]]),te={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"};function oe(o,s){return i(),l("svg",te,s[0]||(s[0]=[D('<defs><clipPath id="a"><rect width="23" height="23" fill-opacity="0" rx="-.5" transform="translate(.5 .5)"></rect></clipPath></defs><rect width="23" height="23" fill="none" rx="-.5" transform="translate(.5 .5)"></rect><g clip-path="url(#a)"><path d="M12 4c2.74 0 5.17 1.38 6.61 3.5H16v2h6v-6h-2v2.49A10.01 10.01 0 0 0 12 2C6.47 2 2 6.47 2 12h2c0-4.42 3.58-8 8-8m8 8c0 4.41-3.59 8-8 8-2.75 0-5.18-1.39-6.62-3.5H8v-2H2v6h2V18a9.99 9.99 0 0 0 8 4c5.52 0 10-4.48 10-10z"></path></g>',3)]))}const se={render:oe},ae=L("movieRandom",{state:()=>({movieTitle:"",moviePlot:"",movieRating:0,movieYear:0,movieGenre:[],movieRuntime:0,movieBackdrop:"",movieId:0,movieTrailerYouTubeId:""}),actions:{async fetchMovieRandom(){try{const o=await K.get(Q);this.movieTitle=o.data.title,this.moviePlot=o.data.plot,this.movieRating=o.data.tmdbRating,this.movieYear=o.data.releaseYear,this.movieGenre=o.data.genres,this.movieRuntime=o.data.runtime,this.movieBackdrop=o.data.backdropUrl,this.movieId=o.data.id,this.movieTrailerYouTubeId=o.data.trailerYouTubeId}catch(o){console.error("Ошибка при получении данных о фильме:",o)}},refreshMovieData(){return this.fetchMovieRandom()}}}),ie={class:"container"},ne={class:"movie"},re={class:"movie_backdrop"},le={class:"movie_content"},ce={class:"movie_content-top"},de={class:"movie_content-center"},me={class:"movie_line"},be=I({__name:"Movie",props:{id:{},title:{},plot:{},rating:{},year:{},genres:{},runtime:{},backdrop:{},youTubeId:{}},setup(o){const s=ae(),d=z(),c=Y(),v=E(""),f=o,m=_(()=>d.path==="/"),g=_(()=>c.user),y=_(()=>{var e;return(e=g.value)==null?void 0:e.favorites.includes(f.id.toString())}),M=async e=>{g.value?y.value?await c.removeFavorites(e):await c.addFavorites(e):F.toggleModal()},w=async()=>{await s.refreshMovieData()},T=()=>{v.value=f.youTubeId},C=()=>{v.value=""};return(e,u)=>{const R=B,S=N,V=A,$=ee;return i(),l(b,null,[t("div",ie,[t("section",ne,[t("div",re,[r(R,{src:e.backdrop,alt:"Backdrop"},null,8,["src"])]),t("div",le,[t("div",ce,[r(S,{class:"movie_rating",rating:e.rating,customClass:"star_svg"},null,8,["rating"]),t("span",null,n(e.year),1),(i(!0),l(b,null,G(e.genres,p=>(i(),l("span",{key:p},n(p),1))),128)),t("span",null,n(("convertMinutesToHoursAndMinutes"in e?e.convertMinutesToHoursAndMinutes:a(P))(e.runtime)),1)]),t("div",de,[t("h2",null,n(e.title),1),t("p",null,n(e.plot),1)]),t("div",{class:k(["movie_content-bottom",{"page-movie":!a(m),"page-cover":a(m)}])},[t("button",{onClick:T,class:"movie_trailer"}," Треилер "),t("div",me,[a(m)?(i(),O(V,{key:0,to:`/movies/${e.id}`},{default:U(()=>u[1]||(u[1]=[j(" О фильме")])),_:1},8,["to"])):h("",!0),t("button",{class:"favorite_btn",onClick:u[0]||(u[0]=p=>M(e.id.toString()))},[r(a(J),{class:k(["favorite",{favoriteFill:a(y)}])},null,8,["class"])]),a(m)?(i(),l("button",{key:1,class:"update_btn",onClick:w},[r(a(se),{class:"update_svg"})])):h("",!0)])],2)])])]),r($,{videoId:a(v),title:e.title,close:C},null,8,["videoId","title"])],64)}}});export{be as _,ae as u};
