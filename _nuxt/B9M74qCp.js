import{u as A,_ as V}from"./BylM_S3Q.js";import{e as E,r as g,g as p,j as r,o as f,c as h,b,n as B,h as M,p as R,q as j,s as z,v as N,x as P,y as D,z as F,i as H,a as w,m as W,w as I,F as k,k as O,t as C}from"./DV5F4fgF.js";import{_ as L}from"./DlAUqK2U.js";import{_ as U}from"./DEwqXg-L.js";import{_ as Y}from"./BTcn1A8Y.js";import{a as G,b as Q}from"./DHLrws4d.js";import{u as q}from"./Cl8OgP9B.js";import"./DH4Hf1_y.js";import"./B_9NZb6C.js";import"./DPoStUW4.js";import"./Bz189x-L.js";const J={key:0},K={key:1},X=E({__name:"cover",setup(e){const n=g(!0),t=A();async function s(){await t.fetchMovieRandom(),n.value=!1}s();const o=p(()=>t.movieTitle||""),a=p(()=>t.moviePlot||""),i=p(()=>t.movieRating||0),c=p(()=>t.movieYear||0),d=p(()=>t.movieGenre||[]),u=p(()=>t.movieRuntime||0),l=p(()=>t.movieBackdrop||""),m=p(()=>t.movieId||0),_=p(()=>t.movieTrailerYouTubeId||"");return(y,v)=>r(n)?(f(),h("div",J,"Загрузка...")):(f(),h("div",K,[b(V,{id:r(m),title:r(o),plot:r(a),rating:r(i),year:r(c),genres:r(d),runtime:r(u),backdrop:r(l),youTubeId:r(_)},null,8,["id","title","plot","rating","year","genres","runtime","backdrop","youTubeId"])]))}}),Z=L(X,[["__scopeId","data-v-d524fddc"]]),ee=B("movieTop10",{state:()=>({movieTop10:[]}),actions:{async fetchMovieTop10(){const e=await G.get(Q);this.movieTop10=e.data}}});function $(e){return j()?(z(e),!0):!1}function S(e){return typeof e=="function"?e():r(e)}const te=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ne=Object.prototype.toString,oe=e=>ne.call(e)==="[object Object]",se=()=>{};function ie(e){return N()}function re(e,n=!0,t){ie()?M(e,t):n?e():R(e)}const x=te?window:void 0;function ae(e){var n;const t=S(e);return(n=t==null?void 0:t.$el)!=null?n:t}function ce(...e){let n,t,s,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,s,o]=e,n=x):[n,t,s,o]=e,!n)return se;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const a=[],i=()=>{a.forEach(l=>l()),a.length=0},c=(l,m,_,y)=>(l.addEventListener(m,_,y),()=>l.removeEventListener(m,_,y)),d=P(()=>[ae(n),S(o)],([l,m])=>{if(i(),!l)return;const _=oe(m)?{...m}:m;a.push(...t.flatMap(y=>s.map(v=>c(l,y,v,_))))},{immediate:!0,flush:"post"}),u=()=>{d(),i()};return $(u),u}function ue(){const e=g(!1),n=N();return n&&M(()=>{e.value=!0},n),e}function le(e){const n=ue();return p(()=>(n.value,!!e()))}function de(e,n={}){const{window:t=x}=n,s=le(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let o;const a=g(!1),i=u=>{a.value=u.matches},c=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",i):o.removeListener(i))},d=D(()=>{s.value&&(c(),o=t.matchMedia(S(e)),"addEventListener"in o?o.addEventListener("change",i):o.addListener(i),a.value=o.matches)});return $(()=>{d(),c(),o=void 0}),a}function pe(e={}){const{window:n=x,initialWidth:t=Number.POSITIVE_INFINITY,initialHeight:s=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:a=!0,type:i="inner"}=e,c=g(t),d=g(s),u=()=>{n&&(i==="outer"?(c.value=n.outerWidth,d.value=n.outerHeight):a?(c.value=n.innerWidth,d.value=n.innerHeight):(c.value=n.document.documentElement.clientWidth,d.value=n.document.documentElement.clientHeight))};if(u(),re(u),ce("resize",u,{passive:!0}),o){const l=de("(orientation: portrait)");P(l,()=>u())}return{width:c,height:d}}const me={class:"container"},fe={class:"wrapper"},_e=["slides-per-view"],ve={class:"slide_index"},he=["src"],ye={key:1,class:"grid"},we=["src"],ge=E({__name:"top10Movie",setup(e){const n=g(null),{$viewport:t}=F(),{width:s}=pe(),o=p(()=>t.matches("mobile_small")),a=g(1),i=()=>{console.log(s.value),a.value=s.value/224};M(()=>{i(),window.addEventListener("resize",i)}),H(()=>{window.removeEventListener("resize",i)});const c=ee(),{data:d}=q("movieTop10",async()=>(await Promise.all([c.fetchMovieTop10()]),c.movieTop10)),u=p(()=>d.value);return(l,m)=>{const _=U,y=Y;return f(),h("div",me,[w("div",fe,[m[0]||(m[0]=w("h2",null,"Топ 10 фильмов",-1)),r(o)?(f(),W(y,{key:0},{default:I(()=>[w("swiper-container",{class:"grid",ref_key:"containerRef",ref:n,loop:!0,"slides-per-view":r(a)},[(f(!0),h(k,null,O(r(u),(v,T)=>(f(),h("swiper-slide",{key:T,class:"movie_slide"},[b(_,{class:"card",to:`/movies/${v.id}`},{default:I(()=>[w("span",ve,C(T+1),1),w("img",{class:"movie_poster",src:v.posterUrl,alt:"Poster"},null,8,he)]),_:2},1032,["to"])]))),128))],8,_e)]),_:1})):(f(),h("div",ye,[(f(!0),h(k,null,O(r(u),(v,T)=>(f(),W(_,{class:"card",to:`/movies/${v.id}`,key:T},{default:I(()=>[w("span",null,C(T+1),1),w("img",{class:"movie_poster",src:v.posterUrl,alt:"Poster"},null,8,we)]),_:2},1032,["to"]))),128))]))])])}}}),Te=L(ge,[["__scopeId","data-v-11a8a94c"]]),be=E({__name:"index",setup(e){return(n,t)=>(f(),h(k,null,[b(Z),b(Te)],64))}}),Pe=L(be,[["__scopeId","data-v-bbf0434f"]]);export{Pe as default};
