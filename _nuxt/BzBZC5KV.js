import{u as $,_ as A}from"./dlCc626s.js";import{e as E,r as w,g as p,j as r,o as f,c as v,b as T,n as V,h as M,p as B,q as R,s as j,v as O,x as C,y as z,z as D,i as F,a as g,w as I,F as k,k as W,t as N,m as H}from"./DrQe5biz.js";import{_ as L}from"./DlAUqK2U.js";import{_ as U}from"./BMjVUsZC.js";import{_ as Y}from"./BnX1Ym4I.js";import{a as G,b as Q}from"./DHLrws4d.js";import{u as q}from"./aKx9v0sg.js";import"./arG2-cIY.js";import"./BmVjzXLw.js";import"./BsexZvGf.js";import"./DLnoV6yg.js";const J={key:0},K={key:1},X=E({__name:"cover",setup(e){const n=w(!0),t=$();async function s(){await t.fetchMovieRandom(),n.value=!1}s();const o=p(()=>t.movieTitle||""),a=p(()=>t.moviePlot||""),i=p(()=>t.movieRating||0),c=p(()=>t.movieYear||0),d=p(()=>t.movieGenre||[]),u=p(()=>t.movieRuntime||0),l=p(()=>t.movieBackdrop||""),m=p(()=>t.movieId||0),_=p(()=>t.movieTrailerYouTubeId||"");return(y,h)=>r(n)?(f(),v("div",J,"Загрузка...")):(f(),v("div",K,[T(A,{id:r(m),title:r(o),plot:r(a),rating:r(i),year:r(c),genres:r(d),runtime:r(u),backdrop:r(l),youTubeId:r(_)},null,8,["id","title","plot","rating","year","genres","runtime","backdrop","youTubeId"])]))}}),Z=L(X,[["__scopeId","data-v-d524fddc"]]),ee=V("movieTop10",{state:()=>({movieTop10:[]}),actions:{async fetchMovieTop10(){const e=await G.get(Q);this.movieTop10=e.data}}});function P(e){return R()?(j(e),!0):!1}function S(e){return typeof e=="function"?e():r(e)}const te=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ne=Object.prototype.toString,oe=e=>ne.call(e)==="[object Object]",se=()=>{};function ie(e){return O()}function re(e,n=!0,t){ie()?M(e,t):n?e():B(e)}const x=te?window:void 0;function ae(e){var n;const t=S(e);return(n=t==null?void 0:t.$el)!=null?n:t}function ce(...e){let n,t,s,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,s,o]=e,n=x):[n,t,s,o]=e,!n)return se;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const a=[],i=()=>{a.forEach(l=>l()),a.length=0},c=(l,m,_,y)=>(l.addEventListener(m,_,y),()=>l.removeEventListener(m,_,y)),d=C(()=>[ae(n),S(o)],([l,m])=>{if(i(),!l)return;const _=oe(m)?{...m}:m;a.push(...t.flatMap(y=>s.map(h=>c(l,y,h,_))))},{immediate:!0,flush:"post"}),u=()=>{d(),i()};return P(u),u}function ue(){const e=w(!1),n=O();return n&&M(()=>{e.value=!0},n),e}function le(e){const n=ue();return p(()=>(n.value,!!e()))}function de(e,n={}){const{window:t=x}=n,s=le(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let o;const a=w(!1),i=u=>{a.value=u.matches},c=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",i):o.removeListener(i))},d=z(()=>{s.value&&(c(),o=t.matchMedia(S(e)),"addEventListener"in o?o.addEventListener("change",i):o.addListener(i),a.value=o.matches)});return P(()=>{d(),c(),o=void 0}),a}function pe(e={}){const{window:n=x,initialWidth:t=Number.POSITIVE_INFINITY,initialHeight:s=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:a=!0,type:i="inner"}=e,c=w(t),d=w(s),u=()=>{n&&(i==="outer"?(c.value=n.outerWidth,d.value=n.outerHeight):a?(c.value=n.innerWidth,d.value=n.innerHeight):(c.value=n.document.documentElement.clientWidth,d.value=n.document.documentElement.clientHeight))};if(u(),re(u),ce("resize",u,{passive:!0}),o){const l=de("(orientation: portrait)");C(l,()=>u())}return{width:c,height:d}}const me={class:"container"},fe={class:"wrapper"},_e=["slides-per-view"],ve={class:"slide_index"},he=["src"],ye={key:1,class:"grid"},we=["src"],ge=E({__name:"top10Movie",setup(e){const n=w(null),{$viewport:t}=D(),{width:s}=pe(),o=p(()=>t.matches("mobile_small")),a=w(0),i=()=>{console.log(s.value),a.value=s.value/224};M(()=>{i(),window.addEventListener("resize",i)}),F(()=>{window.removeEventListener("resize",i)});const c=ee(),{data:d}=q("movieTop10",async()=>(await Promise.all([c.fetchMovieTop10()]),c.movieTop10)),u=p(()=>d.value);return(l,m)=>{const _=U,y=Y;return f(),v("div",me,[g("div",fe,[m[0]||(m[0]=g("h2",null,"Топ 10 фильмов",-1)),T(y,null,{default:I(()=>[r(o)?(f(),v("swiper-container",{key:0,class:"grid",ref_key:"containerRef",ref:n,loop:!0,"slides-per-view":r(a),"space-between":40,"slides-offset-before":20},[(f(!0),v(k,null,W(r(u),(h,b)=>(f(),v("swiper-slide",{key:b,class:"movie_slide"},[T(_,{class:"card",to:`/movies/${h.id}`},{default:I(()=>[g("span",ve,N(b+1),1),g("img",{class:"movie_poster",src:h.posterUrl,alt:"Poster"},null,8,he)]),_:2},1032,["to"])]))),128))],8,_e)):(f(),v("div",ye,[(f(!0),v(k,null,W(r(u),(h,b)=>(f(),H(_,{class:"card",to:`/movies/${h.id}`,key:b},{default:I(()=>[g("span",null,N(b+1),1),g("img",{class:"movie_poster",src:h.posterUrl,alt:"Poster"},null,8,we)]),_:2},1032,["to"]))),128))]))]),_:1})])])}}}),be=L(ge,[["__scopeId","data-v-f649e0af"]]),Te=E({__name:"index",setup(e){return(n,t)=>(f(),v(k,null,[T(Z),T(be)],64))}}),Pe=L(Te,[["__scopeId","data-v-bbf0434f"]]);export{Pe as default};
