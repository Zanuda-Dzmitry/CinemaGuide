import{o as n,c,a as l,m as h}from"./PMH6_XaV.js";import{a as r,e as u,f as p,g as w,h as a,i as d}from"./DGMa4gKQ.js";const y={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.414 18.414"};function f(e,t){return n(),c("svg",y,t[0]||(t[0]=[l("path",{d:"M7.79 9.2 0 1.41 1.41 0 9.2 7.79 17 0l1.41 1.41-7.79 7.79 7.79 7.79L17 18.41l-7.8-7.79-7.79 7.79L0 16.99z"},null,-1)]))}const v={render:f},C=h("auth",{state:()=>({user:null}),actions:{async login(e,t){try{await r.post(u,{email:e,password:t},{headers:{"Content-Type":"application/json"},withCredentials:!0}),await this.profile()}catch(s){throw console.error("Ошибка авторизации:",s),s}},async register(e,t,s,i){try{const o=await r.post(p,{email:e,password:t,name:s,surname:i},{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(o){throw console.error("Ошибка регистрации:",o),o}},async profile(){const e=await r.get(w,{withCredentials:!0});return this.user=e.data,this.user},async addFavorites(e){try{await r.post(a,{id:e.toString()},{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(t){throw console.error("Ошибка добавления в избранное:",t),t}},async removeFavorites(e){try{await r.delete(`${a}/${e}`,{withCredentials:!0}),this.user&&(this.user.favorites=this.user.favorites.filter(t=>t!==e))}catch(t){throw console.error("Ошибка при удалении из избранного:",t),t}},async logout(){this.user=null,await r.get(d,{withCredentials:!0})}}});export{v as c,C as u};
