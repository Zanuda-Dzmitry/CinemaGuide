import{o as n,c,a as l,n as h}from"./Dd8jVmxB.js";import{a as s,e as u,f as p,g as w,h as a,i as d}from"./DHLrws4d.js";const y={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.414 18.414"};function f(t,e){return n(),c("svg",y,e[0]||(e[0]=[l("path",{d:"M7.79 9.2 0 1.41 1.41 0 9.2 7.79 17 0l1.41 1.41-7.79 7.79 7.79 7.79L17 18.41l-7.8-7.79-7.79 7.79L0 16.99z"},null,-1)]))}const L={render:f},C=h("auth",{state:()=>({user:null}),actions:{async login(t,e){try{await s.post(u,{email:t,password:e},{headers:{"Content-Type":"application/json"},withCredentials:!0}),await this.profile()}catch(r){throw console.error("Ошибка авторизации:",r),r}},async register(t,e,r,i){try{const o=await s.post(p,{email:t,password:e,name:r,surname:i},{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(o){throw console.error("Ошибка регистрации:",o),o}},async profile(){const t=await s.get(w,{withCredentials:!0});return this.user=t.data,this.user},async addFavorites(t){var e;try{await s.post(a,{id:t},{headers:{"Content-Type":"application/json"},withCredentials:!0}),(e=this.user)==null||e.favorites.push(t)}catch(r){throw console.error("Ошибка добавления в избранное:",r),r}},async removeFavorites(t){try{await s.delete(`${a}/${t}`,{withCredentials:!0}),this.user&&(this.user.favorites=this.user.favorites.filter(e=>e!==t))}catch(e){throw console.error("Ошибка при удалении из избранного:",e),e}},async logout(){this.user=null,await s.get(d,{withCredentials:!0})}}});export{L as c,C as u};
