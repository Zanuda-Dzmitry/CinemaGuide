import{_ as F}from"./CW61gzuE.js";import{m as N,_ as P,c as B}from"./D9PuEobH.js";import{_ as H}from"./_44A9kV8.js";import{c as A,u as Y}from"./ch0lqL0X.js";import{e as I,o as i,c,a as t,t as r,b as l,j as s,l as h,q as D,n as L,f as z,r as E,g as _,F as y,k as G,s as k,m as O,w as U,d as j}from"./CpOj7bF_.js";import{_ as q}from"./DlAUqK2U.js";import{f as J}from"./BCEyRGDW.js";import{a as K,c as Q}from"./DHLrws4d.js";const W={key:0,class:"modal-player"},X={class:"video-player"},Z=["src","videoId"],x=I({__name:"VideoPlayer",props:{videoId:{},title:{},close:{type:Function}},setup(o){return console.log(o.title),(a,n)=>a.videoId?(i(),c("div",W,[t("div",X,[t("h3",null,r(a.title),1),t("iframe",{src:`https://www.youtube.com/embed/${a.videoId}?controls=0&autoplay=1&mute=1`,videoId:a.videoId},null,8,Z),t("button",{onClick:n[0]||(n[0]=(...m)=>a.close&&a.close(...m))},[l(s(A))])])])):h("",!0)}}),ee=q(x,[["__scopeId","data-v-4b40a59b"]]),te={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"};function oe(o,d){return i(),c("svg",te,d[0]||(d[0]=[D('<defs><clipPath id="a"><rect width="23" height="23" fill-opacity="0" rx="-.5" transform="translate(.5 .5)"></rect></clipPath></defs><rect width="23" height="23" fill="none" rx="-.5" transform="translate(.5 .5)"></rect><g clip-path="url(#a)"><path d="M12 4c2.74 0 5.17 1.38 6.61 3.5H16v2h6v-6h-2v2.49A10.01 10.01 0 0 0 12 2C6.47 2 2 6.47 2 12h2c0-4.42 3.58-8 8-8m8 8c0 4.41-3.59 8-8 8-2.75 0-5.18-1.39-6.62-3.5H8v-2H2v6h2V18a9.99 9.99 0 0 0 8 4c5.52 0 10-4.48 10-10z"></path></g>',3)]))}const se={render:oe},ae=L("movieRandom",{state:()=>({movieTitle:"",moviePlot:"",movieRating:0,movieYear:0,movieGenre:[],movieRuntime:0,movieBackdrop:"",movieId:0,movieTrailerYouTubeId:""}),actions:{async fetchMovieRandom(){try{const o=await K.get(Q);this.movieTitle=o.data.title,this.moviePlot=o.data.plot,this.movieRating=o.data.tmdbRating,this.movieYear=o.data.releaseYear,this.movieGenre=o.data.genres,this.movieRuntime=o.data.runtime,this.movieBackdrop=o.data.backdropUrl,this.movieId=o.data.id,this.movieTrailerYouTubeId=o.data.trailerYouTubeId}catch(o){console.error("Ошибка при получении данных о фильме:",o)}},refreshMovieData(){return this.fetchMovieRandom()}}}),ie={class:"container"},ne={class:"movie"},re={class:"movie_backdrop"},le={class:"movie_content"},ce={class:"movie_content-top"},de={class:"movie_content-center"},me={class:"movie_line"},ye=I({__name:"Movie",props:{id:{},title:{},plot:{},rating:{},year:{},genres:{},runtime:{},backdrop:{},youTubeId:{}},setup(o){const d=ae(),a=z(),n=Y(),m=E(""),f=o,u=_(()=>a.path==="/"),g=_(()=>n.user),b=_(()=>{var e;return(e=g.value)==null?void 0:e.favorites.includes(f.id.toString())}),M=async e=>{g.value?b.value?await n.removeFavorites(e):await n.addFavorites(e):N.toggleModal()},w=async()=>{await d.refreshMovieData()},T=()=>{m.value=f.youTubeId},C=()=>{m.value=""};return(e,v)=>{const R=F,S=P,V=H,$=ee;return i(),c(y,null,[t("div",ie,[t("section",ne,[t("div",re,[l(R,{src:e.backdrop,alt:"Backdrop"},null,8,["src"])]),t("div",le,[t("div",ce,[l(S,{class:"movie_rating",rating:e.rating,customClass:"star_svg"},null,8,["rating"]),t("span",null,r(e.year),1),(i(!0),c(y,null,G(e.genres,p=>(i(),c("span",{key:p},r(p),1))),128)),t("span",null,r(("convertMinutesToHoursAndMinutes"in e?e.convertMinutesToHoursAndMinutes:s(B))(e.runtime)),1)]),t("div",de,[t("h2",null,r(e.title),1),t("p",null,r(e.plot),1)]),t("div",{class:k(["movie_content-bottom",{"page-movie":!s(u),"page-cover":s(u)}])},[t("button",{onClick:T,class:"movie_trailer"}," Треилер "),t("div",me,[s(u)?(i(),O(V,{key:0,to:`/movies/${e.id}`},{default:U(()=>v[1]||(v[1]=[j(" О фильме")])),_:1},8,["to"])):h("",!0),t("button",{class:"favorite_btn",onClick:v[0]||(v[0]=p=>M(e.id.toString()))},[l(s(J),{class:k(["favorite",{favoriteFill:s(b)}])},null,8,["class"])]),s(u)?(i(),c("button",{key:1,class:"update_btn",onClick:w},[l(s(se),{class:"update_svg"})])):h("",!0)])],2)])])]),l($,{videoId:s(m),title:e.title,close:C},null,8,["videoId","title"])],64)}}});export{ye as _,ae as u};
