import{_ as A}from"./LTsmyBVf.js";import{_ as B}from"./Djn54pKL.js";import{u as L,_ as T,c as D}from"./BfVeMM1K.js";import{_ as z}from"./BvbFTMom.js";import{c as E,u as O}from"./BlI_j2uv.js";import{e as I,o as n,c as i,a as o,t as l,b as p,i as e,k as r,q as U,m as Y,f as j,r as q,g as v,j as _,F as b,l as G,s as C,w as J,d as K}from"./C3zKJFoL.js";import{_ as Q}from"./DlAUqK2U.js";import{f as W}from"./DUECCEaU.js";import{a as X,c as Z}from"./DHLrws4d.js";const ee={key:0,class:"modal-player"},oe={class:"video-player"},te=["src","videoId"],se=I({__name:"VideoPlayer",props:{videoId:{},title:{},close:{type:Function}},setup(d){return(a,u)=>a.videoId?(n(),i("div",ee,[o("div",oe,[o("h3",null,l(a.title),1),o("iframe",{src:`https://www.youtube.com/embed/${a.videoId}?controls=0&autoplay=1&mute=1`,videoId:a.videoId},null,8,te),o("button",{onClick:u[0]||(u[0]=(...f)=>a.close&&a.close(...f))},[p(e(E))])])])):r("",!0)}}),ne=Q(se,[["__scopeId","data-v-e196013f"]]),ae={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"};function re(d,a){return n(),i("svg",ae,a[0]||(a[0]=[U('<defs><clipPath id="a"><rect width="23" height="23" fill-opacity="0" rx="-.5" transform="translate(.5 .5)"></rect></clipPath></defs><rect width="23" height="23" fill="none" rx="-.5" transform="translate(.5 .5)"></rect><g clip-path="url(#a)"><path d="M12 4c2.74 0 5.17 1.38 6.61 3.5H16v2h6v-6h-2v2.49A10.01 10.01 0 0 0 12 2C6.47 2 2 6.47 2 12h2c0-4.42 3.58-8 8-8m8 8c0 4.41-3.59 8-8 8-2.75 0-5.18-1.39-6.62-3.5H8v-2H2v6h2V18a9.99 9.99 0 0 0 8 4c5.52 0 10-4.48 10-10z"></path></g>',3)]))}const ie={render:re},ce=Y("movieRandom",{state:()=>({movieRandom:{}}),actions:{async fetchMovieRandom(){const d=await X.get(Z);this.movieRandom=d.data},refreshMovieData(){return this.fetchMovieRandom()}}}),le={class:"container"},de={key:1,class:"error_global"},ue={key:2,class:"movie"},me={class:"movie_backdrop"},ve={class:"movie_content"},_e={class:"movie_content-top"},pe={class:"movie_content-center"},fe={class:"movie_line"},Se=I({__name:"Movie",props:{movieProps:{},isLoading:{type:Boolean},error:{}},setup(d){const a=ce(),u=L(),f=j(),h=O(),g=q(""),M=d,t=v(()=>M.movieProps||null),m=v(()=>f.path==="/"),y=v(()=>h.user),w=v(()=>{var s,c;return(c=y.value)==null?void 0:c.favorites.includes(((s=t.value)==null?void 0:s.id)||"")}),S=async s=>{y.value&&M.movieProps?w.value?await h.removeFavorites(s):await h.addFavorites(s):y.value||u.open()},R=async()=>{await a.refreshMovieData()},V=()=>{var s;t.value&&(g.value=((s=t.value)==null?void 0:s.trailerYouTubeId)||"")},$=()=>{g.value=""};return(s,c)=>{const P=A,F=B,N=T,H=z,x=ne;return n(),i(b,null,[o("div",le,[s.isLoading?(n(),_(P,{key:0})):r("",!0),s.error?(n(),i("div",de," Произошла ошибка при загрузке фильма: "+l(s.error.message),1)):r("",!0),e(t)?(n(),i("section",ue,[o("div",me,[p(F,{src:e(t).backdropUrl,alt:"Backdrop"},null,8,["src"])]),o("div",ve,[o("div",_e,[e(t)?(n(),_(N,{key:0,class:"movie_rating",rating:e(t).tmdbRating,customClass:"star_svg"},null,8,["rating"])):r("",!0),o("span",null,l(e(t).releaseYear),1),(n(!0),i(b,null,G(e(t).genres,k=>(n(),i("span",{key:k},l(k),1))),128)),o("span",null,l(("convertMinutesToHoursAndMinutes"in s?s.convertMinutesToHoursAndMinutes:e(D))(e(t).runtime)),1)]),o("div",pe,[o("h2",null,l(e(t).title),1),o("p",null,l(e(t).plot),1)]),o("div",{class:C(["movie_content-bottom",{"page-movie":!e(m),"page-cover":e(m)}])},[o("button",{onClick:V,class:"movie_trailer"}," Треилер "),o("div",fe,[e(m)?(n(),_(H,{key:0,to:`/movies/${e(t).id}`},{default:J(()=>c[1]||(c[1]=[K(" О фильме")])),_:1},8,["to"])):r("",!0),o("button",{class:"favorite_btn",onClick:c[0]||(c[0]=k=>S(e(t).id))},[p(e(W),{class:C(["favorite",{favoriteFill:e(w)}])},null,8,["class"])]),e(m)?(n(),i("button",{key:1,class:"update_btn",onClick:R},[p(e(ie),{class:"update_svg"})])):r("",!0)])],2)])])):r("",!0)]),e(t)?(n(),_(x,{key:0,videoId:e(g),title:e(t).title,close:$},null,8,["videoId","title"])):r("",!0)],64)}}});export{Se as _,ce as u};
