import{u as P,_ as R}from"./CnwgZ4YO.js";import{e as x,r as T,g as t,j as e,o as s,c as n,b as h,n as B,p as C,h as E,i as V,a as i,m as M,w as k,F as b,k as $,t as L}from"./B6yjllRG.js";import{_ as I}from"./DlAUqK2U.js";import{_ as N}from"./Dah1o9Lf.js";import{_ as U}from"./BYr4GG5O.js";import{a as D,b as O}from"./DHLrws4d.js";import{u as S}from"./T8MuMfwB.js";import"./ECF79Oia.js";import"./CTnQXo_e.js";import"./a-inHfIC.js";import"./BKKWiQZ-.js";const W={key:0},z={key:1},A=x({__name:"cover",setup(m){const l=T(!0),o=P();async function w(){await o.fetchMovieRandom(),l.value=!1}w();const a=t(()=>o.movieTitle||""),_=t(()=>o.moviePlot||""),u=t(()=>o.movieRating||0),g=t(()=>o.movieYear||0),v=t(()=>o.movieGenre||[]),p=t(()=>o.movieRuntime||0),r=t(()=>o.movieBackdrop||""),f=t(()=>o.movieId||0),y=t(()=>o.movieTrailerYouTubeId||"");return(c,d)=>e(l)?(s(),n("div",W,"Загрузка...")):(s(),n("div",z,[h(R,{id:e(f),title:e(a),plot:e(_),rating:e(u),year:e(g),genres:e(v),runtime:e(p),backdrop:e(r),youTubeId:e(y)},null,8,["id","title","plot","rating","year","genres","runtime","backdrop","youTubeId"])]))}}),F=I(A,[["__scopeId","data-v-d524fddc"]]),Y=B("movieTop10",{state:()=>({movieTop10:[]}),actions:{async fetchMovieTop10(){const m=await D.get(O);this.movieTop10=m.data}}}),j={class:"container"},G={class:"wrapper"},q=["slides-per-view"],H={class:"slide_index"},J=["src"],K={key:1,class:"grid"},Q=["src"],X=x({__name:"top10Movie",setup(m){const l=T(null),{$viewport:o}=C(),w=t(()=>o.matches("mobile_small")),a=T(0),_=()=>{const p=window.innerWidth,r=224;console.log(p),a.value=p/r};E(()=>{window.addEventListener("load",()=>{_()}),console.log("после",a.value),window.addEventListener("resize",_),console.log("финиш",a.value)}),V(()=>{window.removeEventListener("resize",_)});const u=Y(),{data:g}=S("movieTop10",async()=>(await Promise.all([u.fetchMovieTop10()]),u.movieTop10)),v=t(()=>g.value);return(p,r)=>{const f=N,y=U;return s(),n("div",j,[i("div",G,[r[0]||(r[0]=i("h2",null,"Топ 10 фильмов",-1)),e(w)?(s(),M(y,{key:0},{default:k(()=>[i("swiper-container",{class:"grid",ref_key:"containerRef",ref:l,loop:!0,"slides-per-view":e(a)},[(s(!0),n(b,null,$(e(v),(c,d)=>(s(),n("swiper-slide",{key:d,class:"movie_slide"},[h(f,{class:"card",to:`/movies/${c.id}`},{default:k(()=>[i("span",H,L(d+1),1),i("img",{class:"movie_poster",src:c.posterUrl,alt:"Poster"},null,8,J)]),_:2},1032,["to"])]))),128))],8,q)]),_:1})):(s(),n("div",K,[(s(!0),n(b,null,$(e(v),(c,d)=>(s(),M(f,{class:"card",to:`/movies/${c.id}`,key:d},{default:k(()=>[i("span",null,L(d+1),1),i("img",{class:"movie_poster",src:c.posterUrl,alt:"Poster"},null,8,Q)]),_:2},1032,["to"]))),128))]))])])}}}),Z=I(X,[["__scopeId","data-v-c047a35d"]]),ee=x({__name:"index",setup(m){return(l,o)=>(s(),n(b,null,[h(F),h(Z)],64))}}),pe=I(ee,[["__scopeId","data-v-bbf0434f"]]);export{pe as default};
