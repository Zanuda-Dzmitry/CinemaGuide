import{u as $,_ as A}from"./cAOYXf6E.js";import{e as I,r as y,g as f,j as c,o as _,c as v,b as w,n as P,h as N,p as R,q as B,s as V,v as O,x as W,y as j,z as D,a as h,w as b,F as T,k as x,t as L,m as F}from"./BvDFyMUt.js";import{_ as k}from"./DlAUqK2U.js";import{_ as H}from"./o-6FgJkw.js";import{_ as Y}from"./DCXTcNTO.js";import{a as z,b as G}from"./DHLrws4d.js";import{u as U}from"./CWmF56w4.js";import"./ZHt8BZGJ.js";import"./CjGK_KLF.js";import"./Dgxk8BIJ.js";import"./Ckd70LX8.js";const Q={key:0},q={key:1},J=I({__name:"cover",setup(e){const n=y(!0),t=$();async function s(){await t.fetchMovieRandom(),n.value=!1}s();const o=f(()=>t.movieTitle||""),u=f(()=>t.moviePlot||""),i=f(()=>t.movieRating||0),p=f(()=>t.movieYear||0),l=f(()=>t.movieGenre||[]),r=f(()=>t.movieRuntime||0),d=f(()=>t.movieBackdrop||""),a=f(()=>t.movieId||0),m=f(()=>t.movieTrailerYouTubeId||"");return(g,S)=>c(n)?(_(),v("div",Q,"Загрузка...")):(_(),v("div",q,[w(A,{id:c(a),title:c(o),plot:c(u),rating:c(i),year:c(p),genres:c(l),runtime:c(r),backdrop:c(d),youTubeId:c(m)},null,8,["id","title","plot","rating","year","genres","runtime","backdrop","youTubeId"])]))}}),K=k(J,[["__scopeId","data-v-d524fddc"]]),X=P("movieTop10",{state:()=>({movieTop10:[]}),actions:{async fetchMovieTop10(){const e=await z.get(G);this.movieTop10=e.data}}});function C(e){return B()?(V(e),!0):!1}function M(e){return typeof e=="function"?e():c(e)}const Z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ee=Object.prototype.toString,te=e=>ee.call(e)==="[object Object]",ne=()=>{};function oe(e){return O()}function se(e,n=!0,t){oe()?N(e,t):n?e():R(e)}const E=Z?window:void 0;function ie(e){var n;const t=M(e);return(n=t==null?void 0:t.$el)!=null?n:t}function re(...e){let n,t,s,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,s,o]=e,n=E):[n,t,s,o]=e,!n)return ne;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const u=[],i=()=>{u.forEach(d=>d()),u.length=0},p=(d,a,m,g)=>(d.addEventListener(a,m,g),()=>d.removeEventListener(a,m,g)),l=W(()=>[ie(n),M(o)],([d,a])=>{if(i(),!d)return;const m=te(a)?{...a}:a;u.push(...t.flatMap(g=>s.map(S=>p(d,g,S,m))))},{immediate:!0,flush:"post"}),r=()=>{l(),i()};return C(r),r}function ae(){const e=y(!1),n=O();return n&&N(()=>{e.value=!0},n),e}function ce(e){const n=ae();return f(()=>(n.value,!!e()))}function ue(e,n={}){const{window:t=E}=n,s=ce(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let o;const u=y(!1),i=r=>{u.value=r.matches},p=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",i):o.removeListener(i))},l=j(()=>{s.value&&(p(),o=t.matchMedia(M(e)),"addEventListener"in o?o.addEventListener("change",i):o.addListener(i),u.value=o.matches)});return C(()=>{l(),p(),o=void 0}),u}function le(e={}){const{window:n=E,initialWidth:t=Number.POSITIVE_INFINITY,initialHeight:s=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:u=!0,type:i="inner"}=e,p=y(t),l=y(s),r=()=>{n&&(i==="outer"?(p.value=n.outerWidth,l.value=n.outerHeight):u?(p.value=n.innerWidth,l.value=n.innerHeight):(p.value=n.document.documentElement.clientWidth,l.value=n.document.documentElement.clientHeight))};if(r(),se(r),re("resize",r,{passive:!0}),o){const d=ue("(orientation: portrait)");W(d,()=>r())}return{width:p,height:l}}const de={class:"container"},pe={class:"wrapper"},me={class:"slide_index"},fe=["src"],_e={key:1,class:"grid"},ve=["src"],he=I({__name:"top10Movie",setup(e){const n=y(null),{$viewport:t}=D();le();const s=f(()=>t.matches("mobile_small")),o=X(),{data:u}=U("movieTop10",async()=>(await Promise.all([o.fetchMovieTop10()]),o.movieTop10)),i=f(()=>u.value);return(p,l)=>{const r=H,d=Y;return _(),v("div",de,[h("div",pe,[l[0]||(l[0]=h("h2",null,"Топ 10 фильмов",-1)),w(d,null,{default:b(()=>[c(s)?(_(),v("swiper-container",{key:0,class:"grid",ref_key:"containerRef",ref:n,loop:!0,"space-between":40,"slides-offset-before":20},[(_(!0),v(T,null,x(c(i),(a,m)=>(_(),v("swiper-slide",{key:m,class:"movie_slide"},[w(r,{class:"card",to:`/movies/${a.id}`},{default:b(()=>[h("span",me,L(m+1),1),h("img",{class:"movie_poster",src:a.posterUrl,alt:"Poster"},null,8,fe)]),_:2},1032,["to"])]))),128))],512)):(_(),v("div",_e,[(_(!0),v(T,null,x(c(i),(a,m)=>(_(),F(r,{class:"card",to:`/movies/${a.id}`,key:m},{default:b(()=>[h("span",null,L(m+1),1),h("img",{class:"movie_poster",src:a.posterUrl,alt:"Poster"},null,8,ve)]),_:2},1032,["to"]))),128))]))]),_:1})])])}}}),ye=k(he,[["__scopeId","data-v-8d456725"]]),ge=I({__name:"index",setup(e){return(n,t)=>(_(),v(T,null,[w(K),w(ye)],64))}}),Oe=k(ge,[["__scopeId","data-v-bbf0434f"]]);export{Oe as default};
