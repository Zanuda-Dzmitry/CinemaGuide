import{a as n,B as c}from"./DHLrws4d.js";import{n as h}from"./DrQe5biz.js";const m=h("movies",{state:()=>({movies:[],hasMoreMovies:!1,error:null,searchQuery:""}),actions:{async loadMovies(r,i,t,o){try{const e=await n.get(`${c}/movie`,{params:{count:r,page:i,title:t,genre:o}});e.status===200?e.data.length>0?(this.movies.push(...e.data),this.hasMoreMovies=!0):this.hasMoreMovies=!1:this.error="Ошибка при загрузке фильмов"}catch(e){this.error=e.message||"Ошибка при загрузке фильмов"}},clearMovies(){this.movies=[]}},getters:{filteredMovies(r){const t=r.searchQuery.toLowerCase().split(" ").filter(s=>s.trim()),o=new Set,e=[];return t.length===0?e:(r.movies.forEach(s=>{const a=s.title.toLowerCase();t.every(l=>a.includes(l))&&(o.has(s.id)||(o.add(s.id),e.push(s)))}),e.slice(0,5))}}});export{m as u};
